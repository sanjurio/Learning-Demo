{% extends "base.html" %}

{% block content %}
<div class="section">
    <h1 class="section-title">My Interests</h1>

    <div class="card mb-4">
        <div class="card-body">
            <p>Select your interests in artificial intelligence to access relevant courses. Your selections will be reviewed by administrators who will grant you access.</p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h3>Select Your Interests</h3>
                </div>
                <div class="card-body">
                    <form method="post" action="{{ url_for('user_interests') }}">
                        {{ form.hidden_tag() }}

                        <div class="checkbox-group">
                            {% for choice in form.interests.choices %}
                            <div class="checkbox-item">
                                <input type="checkbox" name="interests" id="interest-{{ choice[0] }}" value="{{ choice[0] }}"
                                    {% if choice[0] in form.interests.data %}checked{% endif %}>
                                <label for="interest-{{ choice[0] }}">{{ choice[1] }}</label>
                            </div>
                            {% endfor %}
                        </div>

                        <div class="form-group mt-4">
                            {{ form.submit(class="btn btn-primary") }}
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card" style="position: relative; z-index: 1;">
                <div class="card-header">
                    <h3>Interest Access Status</h3>
                </div>
                <div class="card-body">
                    {% if user_interests %}
                        <div class="interest-status-list">
                            {% for ui in user_interests %}
                            <div class="interest-status-item" style="margin-bottom: 15px; padding: 10px; border: 1px solid #dee2e6; border-radius: 5px; background-color: #f8f9fa;">
                                <div class="interest-info">
                                    <h5 style="color: #333; margin-bottom: 8px;">{{ ui.interest.name }}</h5>
                                    <p style="color: #666; margin-bottom: 8px;">{{ ui.interest.description }}</p>
                                </div>
                                <div class="status-badge">
                                    {% if ui.access_granted %}
                                        <span class="badge badge-success">Access Granted</span>
                                    {% else %}
                                        <span class="badge badge-warning">Pending Approval</span>
                                    {% endif %}
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <p>No interests selected. Use the form on the left to select your interests.</p>
                    {% endif %}
                </div>
            </div></div>
        </div>
    </div>
</div>
{% endblock %}